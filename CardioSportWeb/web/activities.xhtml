<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <meta charset="utf-8"/>
        <title>FA - Dashboard</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1"/>
        <link rel="shortcut icon" href="favicon.png"/>
        <!---CSS Files-->
        <link rel="stylesheet" href="css/core.css"/>
        <link rel="stylesheet" href="css/style.css"/>
        <!---jQuery Files-->
        <script src="js/jquery.js"></script>
        <script src="js/jquery-ui.js"></script>
        <script src="js/inputs.js"></script>
        <script src="js/flot.js"></script>
        <script src="js/functions.js"></script>
        <script src="js/auth.js"></script>


        <style type="text/css">
            .support-msg table tbody tr td{
                width: 40%;
                margin-left: 5px;
            }

            .orange-text{
                color: #cf8d00;
            }
        </style>

    </h:head>
    <h:body>

        <div id="wrapper">

            <!--USER PANEL-->

            <div id="usr-panel">
                <div class="av-overlay"></div>
                <img src="img/avatars/nick.jpg" id="usr-av"/>
                <div id="usr-info">
                    <span id="usr-name">Nick Halden</span><span id="usr-role">Administrator</span>
                    <button id="usr-btn" class="orange" data-modal="#usr-mod #mod-home">User CP</button>
                </div>
            </div>

            <!--NAVIGATION-->

            <div id="nav">
                <ul>
                    <li><a href="workouts.xhtml"></a><span class="icon">&lt;</span>трени ровки</li>
                    <li class="active"><span class="icon">F</span>актив ности</li>
                    <li><a href="trainees.xhtml"></a><span class="icon">H</span>спорт смены</li>
                    <li><a href="analytics.html"></a><span class="icon">G</span>Analytics</li>
                    <li><a href="extras.html"></a><span class="icon">S</span>Extras</li>
                    <li><a href="grid.html"></a><span class="icon">N</span>Grid</li>
                    <li data-modal="#usr-mod #mod-set" id="set-btn"><span class="icon">)</span>Settings</li>
                    <li id="logout"><a href="index.html"></a><span class="icon icon-grad">B</span>Log Out</li>
                </ul>
                <br class="clear"/>
            </div>

            <div id="content" class="dashboard-page"><!--BEGIN MAIN CONTENT-->

                <!--TABLE-->
                <!--                <div class="box g16">-->
                <h:panelGroup rendered="#{activitiesPageBean.activities ne null}">
                    <div id="support-tickets" class="box g6 row2"> <!--SUPPORT TICKETS-->
                        <div class="scroll has-scrollbar">
                            <ul class="ul-grad scroll-cont" tabindex="0" style="right: -15px;">
                                <c:forEach items="#{activitiesPageBean.activities}" var="act">
                                    <li>
                                        <span class="support-name">#{act.name}</span>
                                        <span class="support-usr" style="margin-right: 20px;" ><b>#{act.duration}</b> мин.</span>
                                        <p class="support-msg">
                                            #{act.description} 
                                            <table class="g16" style="margin-left: 10px;">
                                                <tr><td style="width: 240px;">Минимальный пульс </td><td class="orange-text">#{act.minHeartRate}</td></tr>
                                                <tr><td>Максимальный пульс </td><td class="orange-text">#{act.maxHeartRate}</td></tr>
                                                <tr><td>Минимальная скорость </td><td class="orange-text">#{act.minSpeed} км/ч</td></tr>
                                                <tr><td>Максимальная скорость </td><td class="orange-text">#{act.maxSpeed} км/ч</td></tr>
                                                <tr><td>Минимальное напряжение </td><td class="orange-text">#{act.minTension}</td></tr>
                                                <tr><td>Максимальное напряжение </td><td class="orange-text">#{act.maxTension}</td></tr>
                                            </table>
                                        </p>

                                    </li>
                                </c:forEach>
                            </ul>
                            <div class="pane" style="display: block;"><div class="slider" style="height: 213px; top: 22.12987012987013px;"></div></div></div>
                    </div>
                </h:panelGroup>
                <!--                </div>-->
                <br class="clear"/>
                <h:form>
                    <div class="box g8">
                        <h2 class="box-ttl">Создание активности</h2>
                        <div class="box-body form">


                            <span class="label input g4">Название</span>
                            <h:inputText value="#{activitiesPageBean.activity.name}" class="g12" />

                            <span class="label input g4">Описание</span>
                            <h:inputTextarea value="#{activitiesPageBean.activity.description}" class="g12" />

                            <span class="label input g4">Длительность (мин.)</span>
                            <h:inputText value="#{activitiesPageBean.activity.duration}" class="g12" />

                            <span class="label input g4">Минимальный пульс</span>
                            <h:inputText value="#{activitiesPageBean.activity.minHeartRate}" class="g12" />

                            <span class="label input g4">Максимальный пульс</span>
                            <h:inputText value="#{activitiesPageBean.activity.maxHeartRate}" class="g12" />

                        </div>
                    </div>
                    <div class="box g8">
                        <div class="box-body form">

                            <span class="label input g4">Минимальная скорость (км/ч)</span>
                            <h:inputText value="#{activitiesPageBean.activity.minSpeed}" class="g12" />

                            <span class="label input g4">Максимальная скорость (км/ч)</span>
                            <h:inputText value="#{activitiesPageBean.activity.maxSpeed}" class="g12" />

                            <span class="label input g4">Минимальное напряжение</span>
                            <h:inputText value="#{activitiesPageBean.activity.minTension}" class="g12" />

                            <span class="label input g4">Максимальное напряжение</span>
                            <h:inputText value="#{activitiesPageBean.activity.maxTension}" class="g12" />


                        </div>
                    </div>

                    <div class="" >
                        <h:commandButton actionListener="#{activitiesPageBean.createActivity()}" class="orange btn-m has-icon" style="cursor: pointer; margin-top: 10px; float: right; margin-right: 25px;" value="Создать" />
                    </div>

                </h:form>
            </div><!--END MAIN CONTENT-->

            <!--MODAL WINDOWS-->


        </div><!--END WRAPPER-->

        <span id="load">
            <img src="img/load.png"/><img src="img/spinner.png" id="spinner"/>
        </span>

        <!---jQuery Code-->
        <script type='text/javascript'>

            // LOAD FUNCTIONS
            //<![CDATA[
            $.fn.loadfns( function() {
                //                sustainSession();
                $('#ind-cont #nbill').removeClass('init');
                $('#support-tickets').children('.scroll').nanoScroller();
                //                $('#support-tickets .support-msg').append('<span class="support-full">VIEW FULL TICKET</span>');
                $('#support-tickets li').click( function() {
                    var supMsgHeight = $(this).children('.support-msg').height() + 196;
                    contHeight = $('#support-tickets').outerHeight();
                    liPosTop = $(this).position().top;
                    if ( $(this).hasClass('expanded') ) {
                        $(this).removeClass('expanded').removeAttr('style');
                    } else {
                        $(this).addClass('expanded').css('height', supMsgHeight)
                        .siblings('li.expanded').removeClass('expanded').removeAttr('style');
                    };
                    if ( liPosTop + supMsgHeight > contHeight ) {
                        $(this).parents('.scroll-cont').animate({ scrollTop: supMsgHeight }, 600);
                    } else if ( $(this).is(':nth-last-child(-n+3)') ) {
                        $(this).parents('.scroll-cont').animate({ scrollTop: contHeight + 41 }, 600);
                    };
                }).children('p').click( function(e) { return false; });
            });
            //]]>
        </script>
    </h:body>
</html>
